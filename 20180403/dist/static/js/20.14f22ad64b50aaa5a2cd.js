webpackJsonp([20],{"/8ar":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("IHPB"),r=a.n(n),i=a("865i"),l={name:"alarm",data:function(){return{tableData:[],currentPage:1,pageSize:10,total:0,pageFlag:!1,loading:!1,tableEmptyText:" ",queryText:""}},mounted:function(){var e=this;this.$nextTick(function(){e._getAlarmInfo()})},methods:{_getAlarmInfo:function(){var e=this,t={page:this.currentPage,page_size:this.pageSize,vehicle_number:this.queryText};this.loading=!0,Object(i.b)(t).then(function(t){e.pageFlag=!1,0==t.data.ret?(e.currentPage=t.data.datas.cur_page,e.pageSize=t.data.datas.page_size,e.total=t.data.datas.item_counts,e.tableData=[].concat(r()(t.data.datas.list))):e.$message({message:t.data.msg,type:"error"}),e.loading=!1,e.tableData.length||(e.tableEmptyText="暂无数据")})},onCurrentChange:function(e){this.pageFlag||(this.pageFlag=!0,this.currentPage=e,this._getAlarmInfo())},onSizeChange:function(e){this.pageSize=e,this._getAlarmInfo()},onSearch:function(e){this.queryText=e,1===this.currentPage?this._getAlarmInfo():this.currentPage=1},onDeleteClick:function(e){var t=this;this.$confirm("此操作将永久删除该行, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.a)({fault_alarm_id:e.fault_alarm_id}).then(function(e){t.loadTableData(e,2)})})},loadTableData:function(e,t){if(0==e.data.ret){this._getAlarmInfo();var a=1===t?"添加成功！":"删除成功！";this.$message({message:a,type:"success"})}else this.$message({message:e.data.msg,type:"error"})}},components:{searchBox:a("Rv3D").a}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"alarm main-panel"},[a("searchBox",{on:{onSearch:e.onSearch}}),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"数据加载中..."}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"empty-text":e.tableEmptyText,border:"",height:"531"}},[a("el-table-column",{attrs:{prop:"vehicle_number",label:"车牌号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"warning_contents",label:"报警内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alarm_time",label:"报警时间"}}),e._v(" "),a("el-table-column",{attrs:{width:"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.onDeleteClick(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.onSizeChange,"current-change":e.onCurrentChange}})],1)},staticRenderFns:[]};var o=a("Z0/y")(l,s,!1,function(e){a("RC8T")},"data-v-45678a22",null);t.default=o.exports},RC8T:function(e,t){}});
//# sourceMappingURL=20.14f22ad64b50aaa5a2cd.js.map